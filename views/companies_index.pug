extends layout

block content
  .card
    .card-header
      h1 Unternehmen
      .buttons
        a.btn.secondary(href="/api/companies.csv") CSV Export
        a.btn(href="/companies/new") + Neues Unternehmen

  if companies && companies.length
    table.table
      thead
        tr
          th.nr #
          th Name
          th Website
          th Ort
          th.right Actions
      tbody
        each c, i in companies
          tr
            td #{i+1}
            td: a(href=`/companies/${c._id}`)= c.name
            td
              if c.website
                - const url = c.website.startsWith('http') ? c.website : `https://${c.website}`;
                a(href=url rel="noopener")= c.website
              else
                | —
            td= c.city || '—'
            td.right
              .buttons
                a.btn.secondary(href=`/companies/${c._id}`) Details
  else
    .card.center.max-w-sm
      h2 Noch keine Unternehmen
      .buttons.center
        a.btn(href="/companies/new") Unternehmen anlegen
