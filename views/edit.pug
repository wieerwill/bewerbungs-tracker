extends layout

block content
  .card
    .card-header
      h1 Bewerbungsdaten bearbeiten
      if job && job.title
        p.muted #{job.title}

  if msg
    .card
      p.muted= msg

  .card
    form(action=`/edit/${job && job._id}`, method="POST")
      /* Company */
      fieldset.form-section
        legend Abschnitt: Unternehmen
        .row.row-2
          .field
            label(for="company-name") Name
            input#company-name(
              type="text"
              name="companyName"
              placeholder="z. B. Corpuls"
              value=(job && job.company && job.company.name) || ''
              required
            )
          .field
            label(for="company-website") Website
            input#company-website(
              type="url"
              name="companyWebsite"
              placeholder="https://…"
              value=(job && job.company && job.company.website) || ''
            )
          .field
            label(for="company-street") Straße
            input#company-street(
              type="text"
              name="companyStreet"
              placeholder="Musterstraße 1"
              value=(job && job.company && job.company.street) || ''
            )
          .field
            label(for="company-city") Stadt
            input#company-city(
              type="text"
              name="companyCity"
              placeholder="Augsburg"
              value=(job && job.company && job.company.city) || ''
            )
        .field
          label(for="company-notes") Notizen
          textarea#company-notes(name="companyNote", rows="3", placeholder="Besonderheiten, Karriereseite …")= (job && job.company && job.company.note) || ''

      /* Contact */
      fieldset.form-section
        legend Abschnitt: Kontaktperson
        .row.row-3
          .field
            label(for="contact-name") Name
            input#contact-name(
              type="text"
              name="contactName"
              placeholder="Vor- und Nachname"
              value=(job && job.contact && job.contact.name) || ''
            )
          .field
            label(for="contact-email") E-Mail
            input#contact-email(
              type="email"
              name="contactEmail"
              placeholder="name@example.com"
              value=(job && job.contact && job.contact.email) || ''
            )
          .field
            label(for="contact-phone") Telefon
            input#contact-phone(
              type="tel"
              name="contactPhone"
              placeholder="+49 …"
              value=(job && job.contact && job.contact.phone) || ''
            )
        .field
          label(for="contact-note") Notizen
          textarea#contact-note(name="contactNote", rows="3", placeholder="Rolle, Verfügbarkeit …")= (job && job.contact && job.contact.note) || ''

      /* Job */
      fieldset.form-section
        legend Abschnitt: Stelle
        .row.row-2
          .field
            label(for="job-title") Titel
            input#job-title(
              type="text"
              name="jobTitle"
              placeholder="z. B. Embedded Software Engineer"
              value=(job && job.title) || ''
              required
            )
          .field
            // optional: Quelle der Ausschreibung
            label(for="job-source") Quelle (optional)
            input#job-source(
              type="url"
              name="jobSource"
              placeholder="Link zur Ausschreibung"
              value=(job && job.source) || ''
            )
        .field
          label(for="job-description") Beschreibung
          textarea#job-description(name="jobDescription", rows="4", placeholder="Kurzbeschreibung oder relevante Punkte …")= (job && job.description) || ''
        .field
          label(for="job-note") Notizen
          textarea#job-note(name="jobNote", rows="3", placeholder="Eigenes Fazit, nächste Schritte, Reminder …")= (job && job.note) || ''

      .form-actions.buttons
        button.btn(type="submit") Speichern
        a.btn.secondary(href="/") Abbrechen
